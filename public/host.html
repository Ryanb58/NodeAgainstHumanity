<!doctype html>
<html>
<head>
    <title>Host - Node Against Humanity</title>
    <link rel="StyleSheet" href="style.css" type="text/css" media="screen">
</head>
<body>
    <div id="gameIdPage">
        <h2></h2>
    </div>
    <div id="onlineUsersPage">
        <strong>Users:</strong>
        <ul id="onlineUsers"></ul>
    </div>
    <div id="gameMasterPage">

    </div>
    <div  id="questionCardPage">

    </div>
    <div id="submittedCardsPage">
        <ul id="submittedCards"></ul>
    </div>

<script src="/socket.io/socket.io.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script>
var socket = io();

//Called initially.
socket.emit('create:game');

socket.on('game:created', function(roomId){
    console.log("Room ID: " + roomId);
    $('#gameIdPage h2').text(roomId);
    socket.emit('get:games');
});

/*
socket.on('list:games', function(games){
    for(i = 0; i < games.length; i++)
    {
        $('#listOfGames ul').append($('<li>').html("<div style=\'text-decoration: underline\'>" + games[i] + "</div>"));
    }
});
*/

socket.on('list:players', function(players){
    console.log('listing players..');

    //Clear the list of users.
    $('#onlineUsers').empty();

    //Add the players to the list.
    for(i = 0; i < players.length; i++)
    {
        $('#onlineUsers').append($('<li>').html("<div style=\'text-decoration: underline\'>" + players[i] + "</div>"));
    }
});

socket.on('display:questionCard', function(card)
{
    console.log("Card: " + card);
    console.log("Card Text: " + card.text);
    $('#questionCardPage').html("Current Question Card: " + card.text);
});

socket.on('list:submittedCards', function(cards)
{
    $('#submittedCardsPage #submittedCards').empty();

    for(i=0; i<cards.length;i++)
    {
        $('#submittedCardsPage #submittedCards').append($('<li>').html('Current Question Card: ' + cards[i].text));
    }
});

socket.on('winning:player', function(name){
    alert(name + 'won this round!');
});

</script>
  </body>
</html>
